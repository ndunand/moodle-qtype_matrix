{"version":3,"file":"singleradiosync.min.js","sources":["../src/singleradiosync.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Used in single type questions with radio button groups so that each cell radio button\n * that is selected syncs its selected column with the hidden inputs that hold the cell values\n * stored for an attempt.\n * E.g. a matrix has 4 columns, so 4 radio buttons per row.The radio button group name is row0.\n * Each hidden cell input bears the cell's name (e.g. row0col2) and is either true or not.\n * Those hidden input values are the response values that will be saved in attempt steps.\n * This allows single and multiple to have the same response format and allows easier switching and\n * helps during the regrading workflow.\n * @copyright  2025\n * @author Daniel Poggenpohl <daniel.poggenpohl@fernuni hagen.de>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n *\n * @param {Event} click\n */\nconst propagateChangedValue = (click) => {\n    let clickedElement = click.target;\n    if (clickedElement.tagName !== 'INPUT' || clickedElement.type !== 'radio') {\n        return;\n    }\n    let hiddenCheckboxForRadio = clickedElement.parentElement.querySelector('input[type=\"checkbox\"]');\n    let hiddenCheckboxesForRow = clickedElement.closest('tr').querySelectorAll('input[type=\"checkbox\"]');\n    hiddenCheckboxesForRow.forEach((hiddenCheckboxForRow) => {\n        hiddenCheckboxForRow.checked = false;\n    });\n    hiddenCheckboxForRadio.checked = true;\n};\n\nexport const init = (matrixTableId) => {\n    let matrixTable = document.getElementById(matrixTableId);\n    let matrixRows = matrixTable.querySelectorAll('tbody tr');\n    matrixRows.forEach((matrixRow) => {\n        matrixRow.addEventListener('click', propagateChangedValue);\n    });\n};\n"],"names":["propagateChangedValue","click","clickedElement","target","tagName","type","hiddenCheckboxForRadio","parentElement","querySelector","closest","querySelectorAll","forEach","hiddenCheckboxForRow","checked","matrixTableId","document","getElementById","matrixRow","addEventListener"],"mappings":";;;;;;;;;;;;;;MAiCMA,sBAAyBC,YACvBC,eAAiBD,MAAME,UACI,UAA3BD,eAAeE,SAA+C,UAAxBF,eAAeG,gBAGrDC,uBAAyBJ,eAAeK,cAAcC,cAAc,0BAC3CN,eAAeO,QAAQ,MAAMC,iBAAiB,0BACpDC,SAASC,uBAC5BA,qBAAqBC,SAAU,KAEnCP,uBAAuBO,SAAU,iBAGhBC,gBACCC,SAASC,eAAeF,eACbJ,iBAAiB,YACnCC,SAASM,YAChBA,UAAUC,iBAAiB,QAASlB"}